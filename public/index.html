<!DOCTYPE html>
<html lang="en">
    <link rel="stylesheet" href="style.css">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo UI</title>
</head>
<body>
    
<!-- <div class="app">
    <header class="header">
        <img class="logo" src="logo.png" alt="">
    </header>

    <div class="clock">
        11:11:12 PM
    </div>

    <div class="lots">

        <article class="lot">
            <div class="price">16</div>
            <h1>Apple</h1>
            <p>Applle description</p>
        </article>

        <article class="lot">
            <div class="price">20</div>
            <h1>Orange</h1>
            <p>Orange description</p>
        </article>

    </div>

</div> -->

<div id="root"></div>

<script>

//###########################################

    let state = {
            //Создание массива с времнем
        time: new Date(),
        lots: null
    }

//###########################################

    function App () {
        const app = document.createElement('div')
        app.className = 'app'

        app.append(Header())
        app.append(Clock({time: state.time}))
        app.append(Lots({lots: state.lots}))

        return app
    }

//###########################################
    
    //Создание Header'a 
    function Header () {
        const header = document.createElement('header')
        header.className = 'header'
        header.append(logo())
        return header
    }

    //Создание лого
    function logo () {
        const logo = document.createElement('img')
        logo.classList.add('logo')
        logo.src = 'logo.png'
        return logo 
    }


    //Добавление в тэг header - logo



    //Создание элеменета div для часов
    function Clock({time}) {
        const node = document.createElement('div')
        node.className = 'clock'

        const value = document.createElement('span')
        value.className = 'value'
        //Вставка часов в div с часами
        value.innerText = time.toLocaleTimeString()  

        node.append(value)

        //Создание иконки которая показывает день и ночь 

        const icon = document.createElement('span')

        if (time.getHours() >= 7 && time.getHours() <= 21) {
            icon.className = 'icon day'
        } else {
            icon.className = 'icon night'
        }

        node.append(icon)

        return node
    }

    // Создание заглушки до загрузки компанента 
    function Loading () {
        const node = document.createElement('div')
        node.className = 'loading'
        node.innerHTML = 'Loading...'
        return node
    }

    // Создание лотов с товаром

    function Lots ({lots}) {
 
        if (lots === null) {
            return Loading()
        }

        const list = document.createElement('div')
        list.className = 'lots'

        lots.forEach((lot) => {
            list.append(Lot({
                lot
            }))
        })

        return list

    }

    function Lot ({lot}) {

        const node = document.createElement('article')
            node.className = 'lot'

            const price = document.createElement('div')
            price.className = 'price'
            price.innerText = lot.price
            node.append(price)

            const name = document.createElement('h1')
            name.innerText = lot.name
            node.append(name)

            const description = document.createElement('p')
            description.innerText = lot.description
            node.append(description)

            return node

    }
//###########################################

function renderViev (state) {
    render(
        App({state}),
        document.getElementById('root')
    )
}

renderViev(state)

//###########################################


setInterval(() => {

    // const clock = document.getElementsByClassName('clock').item(0) // Alt versin old 
    // const clock = document.getElementById('root').getElementsByClassName('clock').item(0) // Alt versin old 

    state = {
        ...state,
        time: new Date()
    }

    renderViev(state)

}, 1000)


//###########################################

    render(
        App({state}),
        document.getElementById('root')
    )

    //Добавление в массив domRoot выше созданных переменых

    function render (newDom, realDomRoot) {
        realDomRoot.innerHTML = ''
        realDomRoot.append(newDom)
    }

//###########################################
</script>
    
</body>
</html>